/*! GhostEdit WYSIWYG editor Copyright (c) 2010-2012 Nico Burns

Description:       An open source JavaScript WYSIWYG editor focused on usability
Homepage:          http://ghosted.it
License:           LGPL
Author:            Nico Burns <nico@nicoburns.com>
Version:           1.0rc1
Release Date:      2012-12-13
Browser Support:   Internet Explorer 6+, Mozilla Firefox 3.6+, Google Chrome, Apple Safari (latest), Opera (latest)
*/
(function(){var e={aelem:!1,context:null};e.el={},e.enable=function(){ghostedit.event.trigger("ui:replace"),ghostedit.event.addListener("ui:update",function(){e.update()},"minimalui"),ghostedit.event.addListener("ui:replace",function(){ghostedit.api.plugin.disable("minimalui")},"minimalui");var t,n,r;t=document.createElement("div"),t.id="ghostedit_minimalui_toolbar",t.className="ghostedit_minimalui_toolbar",e.el.toolbar=t,e.insertbutton({label:"Bold",icon:"format-bold.png",action:function(){ghostedit.api.format.bold()}}),e.insertbutton({label:"Italic",icon:"format-italic.png",action:function(){ghostedit.api.format.italic()}}),e.insertbutton({label:"Underline",icon:"format-underline.png",action:function(){ghostedit.api.format.underline()}}),e.insertbutton({label:"Strikethrough",icon:"format-strikethrough.png",action:function(){ghostedit.api.format.strikethrough()}}),e.insertbutton({label:"Align Left",icon:"align-left.png",action:function(){ghostedit.api.format.alignText("left")}}),e.insertbutton({label:"Align Center",icon:"align-center.png",action:function(){ghostedit.api.format.alignText("center")}}),e.insertbutton({label:"Align Right",icon:"align-right.png",action:function(){ghostedit.api.format.alignText("right")}}),e.insertbutton({label:"Justify",icon:"align-justified.png",action:function(){ghostedit.api.format.alignText("justify")}}),n=ghostedit.options.plugins;if(n)for(r=0;r<n.length;r++)switch(n[r]){case"link":e.insertbutton({label:"Insert Link",icon:"insert-link.png",action:function(){ghostedit.api.link.create()}});break;case"list":e.insertbutton({label:"Bulleted List",icon:"list-unordered.png",action:function(){ghostedit.api.list.toggle("unordered")}}),e.insertbutton({label:"Numbered List",icon:"list-ordered.png",action:function(){ghostedit.api.list.toggle("ordered")}})}e.insertbutton({label:"Undo",icon:"undo16.png",action:function(){ghostedit.api.undo()}}),e.insertbutton({label:"Redo",icon:"redo16.png",action:function(){ghostedit.api.redo()}}),ghostedit.wrapdiv.insertBefore(t,ghostedit.wrapdiv.firstChild),ghostedit.util.addEvent(e.el.toolbar,"mouseup",ghostedit.util.cancelAllEvents),ghostedit.util.addEvent(e.el.toolbar,"click",ghostedit.util.preventBubble),ghostedit.util.addEvent(e.el.toolbar,"mousedown",ghostedit.util.preventBubble)},e.disable=function(){ghostedit.event.removeAllListeners("minimalui"),ghostedit.wrapdiv.removeChild(e.el.toolbar)},e.update=function(){var t,n=!1,r,i,s,o,u,a,f,l="",c="N/A",h,p;p=e.highlightmap;for(r=0;r<p.length;r++)ghostedit.util.removeClass(p[r].element,"current");for(r=0;r<ghostedit.selection.nodepath.length;r++){u=ghostedit.selection.nodepath[r],a=u.tagName.toLowerCase(),f=ghostedit.util.trim(u.className),console.log();for(i=0;i<p.length;i++)p[i].test.call(p[i].data,a,f,u)&&ghostedit.util.addClass(p[i].element,"current")}},e.quickbuttons=[],e.highlightmap=[],e.insertbutton=function(t){var n,r;if(!t||!t.label||!t.icon||!ghostedit.util.isFunction(t.action))return!1;n=document.createElement("img"),n.src=ghostedit.options.imageurl+"/minimalui/"+t.icon,n.title=t.label,n.alt=t.label,t.style&&(n.style.cssText=t.style),n.style.marginRight="5px",e.el.toolbar.appendChild(n),t.highlighttest&&e.highlightmap.push({element:n,test:t.highlighttest}),ghostedit.util.addEvent(n,"click",t.action)},e.inserttextfield=function(e,t){var n;n=document.createElement("input"),t.id&&(n.id="ghostedit_minimalui_textfield_"+t.id),n.style.width=t.width?t.width:"200px",t.label&&(e.innerHTML+=t.label+"<br />"),e.appendChild(n),ghostedit.util.addEvent(n,"click",function(e){ghostedit.util.preventBubble(e)}),ghostedit.util.addEvent(n,"keypress",function(e){ghostedit.util.preventBubble(e)}),ghostedit.util.addEvent(n,"keydown",function(e){ghostedit.util.preventBubble(e)}),ghostedit.util.addEvent(n,"keyup",t.onkeyup)},e.insertstylebox=function(t,n){var r,i;e.highlightmap.push({element:r,data:{tagname:n.tagname,classname:n.classname!==undefined?n.classname:""},test:function(e,t,n){return e===this.tagname&&t===this.classname}}),r.onclick=function(){ghostedit.api.format.setStyle(n.tagname,n.classname)}},ghostedit.api.plugin.register("minimalui",e)})();